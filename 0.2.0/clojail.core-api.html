<html>
  <head>
    <title>clojail.core - clojail nil API documentation</title>
    <link href="static/favicon.png" rel="icon" />
    <link href="static/favicon.png" rel="shortcut icon" />
    <link media="all" type="text/css" href="static/clojure.css" rel="stylesheet" />
    <link media="all" type="text/css" href="static/wiki.css" rel="stylesheet" />
    <link media="all" type="text/css" href="static/internal.css" rel="stylesheet" />
    <!-- TODO: are we using these (from clojure.org)? If so, add the files -->
    <script src="file/view/code_highlighter.js" type="text/javascript"></script>
    <script src="file/view/clojure.js" type="text/javascript"></script>
    <style>.menuWrapper{height: 36px;}</style>
    <!--[if lte IE 6]>
    <link rel="stylesheet" href="http://www.wikispaces.com/_/2009051601/s/internal_ie.css" type="text/css" />
    <![endif]-->
  </head>
<!--
This document was auto-generated from the source by the clojure autodoc system.
To report errors or ask questions about the overall documentation structure, formatting,
etc., contact Tom Faulhaber (google mail name: tomfaulhaber).
For errors in the documentation of a particular namespace, contact the author of that
namespace.
-->
  <body>
    <div id="AllContentContainer">
      <div id="Header">
	<a id="Logo" href="index.html"><img alt="Clojure" height="100" width="100" src="static/clojure-icon.gif" /></a>
	<h1><a title="page header title" id="page-header" href="index.html">clojail</a></h1>
      </div>
      <div id="leftcolumn"><div style="text-align: center;"></div>
<div class="menu">
  <div class="WikiCustomNav WikiElement wiki">
    <span class="toc-header"><span id="project-name">clojail</span> <span id="version"></span> API</span><br />
    <ul>
      <li><a class="wiki_link" href="index.html">Overview</a></li>
      <li><a class="wiki_link" href="api-index.html">API Index</a></li>
    </ul>
    <span class="toc-header">Namespaces</span>
    <ul id="left-sidebar-list">
      <li><a href="clojail.core-api.html" class="wiki_link">clojail.core</a></li><li><a href="clojail.jvm-api.html" class="wiki_link">clojail.jvm</a></li><li><a href="clojail.testers-api.html" class="wiki_link">clojail.testers</a></li>
    </ul>
    
    <a href="http://clojure.org" class="wiki_link">Clojure Home</a>
  </div>
</div>
</div>
      <div id="rightcolumn">
	<div id="Content">
	  <div class="contentBox"><div class="innerContentBox">
              <div id="content_view" class="wiki wikiPage">
                <div id="right-sidebar"><div id="toc">
  <h1 class="nopad">Table of Contents</h1>
  <div style="margin-left: 1em;" class="toc-section">
    <a href="#toc0">Overview</a>
    <div style="margin-left: 1em;" class="toc-entry">
      <a href="#clojail.core/check-form">check-form</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#clojail.core/enable-security-manager">enable-security-manager</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#clojail.core/sandbox">sandbox</a>
    </div><div style="margin-left: 1em;" class="toc-entry">
      <a href="#clojail.core/thunk-timeout">thunk-timeout</a>
    </div>
    <br />
  </div>
</div>
</div>
                <div id="content-tag"><h1 id="overview">API for <span id="namespace-name">clojail.core</span>
  - <span id="header-project">clojail</span> <span id="header-version"></span> (<span id="header-status"></span>)
  </h1>

<br />Usage:
<pre>
(ns your-namespace
  (:require <span id="long-name">clojail.core</span>))
</pre><pre>
</pre><h2>Overview</h2>
<pre id="namespace-docstr">Defines simple Clojure sandboxing functionality.</pre>


<br />
<h2>Public Variables and Functions</h2>
<div id="var-entry">
  <br />
  <hr />
  <h2 id="clojail.core/check-form">check-form</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (check-form form tester)
</pre>
  <pre id="var-docstr">Check a form to see if it trips a tester.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="clojail.core/enable-security-manager">enable-security-manager</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (enable-security-manager)
</pre>
  <pre id="var-docstr">Enable the JVM security manager. The sandbox can do this for you.</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="clojail.core/sandbox">sandbox</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (sandbox tester &amp; {:keys [timeout namespace context jvm?], :or {timeout 10000, namespace (gensym sandbox), context (-&gt; (empty-perms-list) domain context), jvm? true}})
</pre>
  <pre id="var-docstr">This function creates a new sandbox from a tester (a set of symbols that make up a blacklist
and possibly a whitelist) and optional arguments. A tester can either be a plain set of symbols,
in which case it'll be treated as a blacklist. Otherwise, you can provide a map of :whitelist and
:blacklist bound to sets. In this case, the whitelist and blacklist will both be used. If you only
want a whitelist, just supply :whitelist in the map.

Optional arguments are as follows:
:timeout, default is 10000 MS or 10 seconds. If the expression evaluated in the sandbox takes
longer than the timeout, an error will be thrown and the thread running the code will be stopped.
:namespace, the namespace of the sandbox. The default is (gensym "sandbox").
:context, the context for the JVM sandbox to run in. Only relevant if :jvm? is true. It has a sane
default, so you shouldn't need to worry about this.
:jvm?, if set to true, the JVM sandbox will be employed. It defaults to true.

This function will return a new function that you should bind to something. You can call this
function with code and it will be evaluated in the sandbox. The function also takes an optional
second parameter which is a hashmap of vars to values that will be passed to push-thread-bindings.

Example: (def sb (sandbox #{'alter-var-root 'java.lang.Thread} :timeout 5000))
         (let [writer (java.io.StringWriter.)]
           (sb '(println "blah") {#'*out* writer}) (str writer))
The above example returns "blah\n"</pre>
  
  
  
</div><div id="var-entry">
  <br />
  <hr />
  <h2 id="clojail.core/thunk-timeout">thunk-timeout</h2>
  <span id="var-type">function</span><br />
  <pre id="var-usage">Usage: (thunk-timeout thunk seconds)
</pre>
  <pre id="var-docstr">Takes a function and an amount of time in ms to wait for the function to finish
executing. The sandbox can do this for you.</pre>
  
  
  
</div>


</div>
              </div>
            </div>
          </div>
	</div>
	<div id="foot">
	  <div style="text-align: center;" id="copyright">No copyright info </div>
	</div>
      </div>
      <div id="DesignedBy">Logo &amp; site design by <a title="Visit Tom Hickey's website." href="http://www.tomhickey.com">Tom Hickey</a>.<br />
      Clojure auto-documentation system by Tom Faulhaber.</div>
    </div>
    <!-- /AllContentContainer -->
  </body>

</html>